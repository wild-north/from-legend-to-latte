import { BlogPost, BlogMetadata } from '@/types/blog';

export function calculateReadingTime(content: string): number {
  const wordsPerMinute = 200;
  const words = content.split(/\s+/).length;
  return Math.ceil(words / wordsPerMinute);
}

export function formatDate(dateString: string): string {
  const date = new Date(dateString);
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}

export const sampleArticles: BlogPost[] = [
  {
    slug: 'coffee-discovery-legends-journey',
    title: 'Історія відкриття кави: легенди та подорож світом',
    excerpt: 'Від легенди про козопаса Калді в Ефіопії до поширення кави торговими шляхами - захоплюючий розповідь про те, як кава завоювала світ.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Історія кави починається з древніх легенд і продовжується до наших днів як одна з найзахоплюючіших історій в світі їжі та напоїв.</p>
      
      <h2>Легенда про Калді та його кози</h2>
      <p>За найпопулярнішою легендою, у IX столітті ефіопський козопас Калді помітив незвичайну поведінку своїх кіз після того, як вони з'їли червоні ягоди з невідомого дерева. Кози стали надзвичайно енергійними і не могли заснувати всю ніч.</p>
      
      <h2>Поширення Аравією</h2>
      <p>З Ефіопії кава потрапила до Ємену, де суфійські монахи почали використовувати її для підтримання неспання під час нічних молитов. Саме в Ємені кава почала культивуватися планомірно.</p>
      
      <h2>Османська імперія та перші кав'ярні</h2>
      <p>У XV-XVI століттях кава поширилася по всій Османській імперії. У 1554 році в Константинополі відкрилася перша кав'ярня, яка стала центром соціального життя та інтелектуальних дискусій.</p>
      
      <h2>Прихід до Європи</h2>
      <p>Венеціанські торговці привезли каву до Європи в XVII столітті. Спочатку церква ставилася до неї з підозрою, називаючи "напоєм сатани", поки Папа Климент VIII не благословив її.</p>
      
      <h2>Колонізація та плантації</h2>
      <p>Європейці почали створювати кавові плантації в своїх колоніях: голландці в Індонезії, французи в Карибському басейні, португальці в Бразилії. Це змінило світову економіку та торгівлю.</p>
    </div>`,
    publishedAt: '2024-01-20',
    author: 'Serhii',
    category: 'Історія',
    tags: ['історія', 'легенди', 'ефіопія', 'поширення'],
    readingTime: 6,
    featured: true,
    coverImage: '/images/coffee-discovery.jpg'
  },
  {
    slug: 'espresso-history-italian-legend',
    title: 'Історія еспресо: народження італійської легенди',
    excerpt: 'Як в Італії наприкінці XIX століття народилася революційна технологія приготування кави, що назавжди змінила світову кавову культуру.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Еспресо - це не просто спосіб приготування кави, це культурний феномен, що визначив ставлення до кави в усьому світі.</p>
      
      <h2>Винахід під тиском</h2>
      <p>У 1884 році італієць Анджело Моріондо отримав патент на "нову парову машину для економічного та миттєвого приготування кавового напою". Це була перша еспресо-машина в історії.</p>
      
      <h2>Революція Луїджі Беццера</h2>
      <p>У 1901 році Луїджі Беццера вдосконалив винахід, створивши машину, яка готувала каву окремими порціями. Його машина могла приготувати чашку кави менш ніж за хвилину - це було революційно для того часу.</p>
      
      <h2>Ера Деsidеріо Павоні</h2>
      <p>Деsidеріо Павоні купив патент Беццера та почав масове виробництво еспресо-машин під брендом "La Pavoni". Саме він популяризував еспресо по всій Італії.</p>
      
      <h2>Технічні вдосконалення</h2>
      <p>У 1938 році Акілле Ґаджа винайшов важільну еспресо-машину, яка дозволяла краще контролювати тиск. А в 1961 році з'явилася перша помпова машина Faema E61.</p>
      
      <h2>Культура еспресо</h2>
      <p>Еспресо став не просто напоєм, а цілою культурою. В Італії склалися традиції його споживання: швидко, стоячи біля бару, ніколи не з молоком після 11 ранку.</p>
      
      <h2>Поширення світом</h2>
      <p>З 1980-х років еспресо почав завойовувати світ, адаптуючись до місцевих смаків і створюючи нові напої на своїй основі.</p>
    </div>`,
    publishedAt: '2024-01-18',
    author: 'Serhii',
    category: 'Історія',
    tags: ['еспресо', 'італія', 'технології', 'культура'],
    readingTime: 7,
    featured: true,
    coverImage: '/images/espresso-history.jpg'
  },
  {
    slug: 'coffee-harvesting-processing-types',
    title: 'Збір кави та типи обробки зерен',
    excerpt: 'Детальний розгляд процесу збору кавових вишень та різних методів обробки, які формують унікальний смак кожної чашки кави.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Шлях від кавового дерева до чашки починається зі збору та обробки зерен - процесів, що кардинально впливають на смак майбутнього напою.</p>
      
      <h2>Сезон збору</h2>
      <p>Кавові вишні дозрівають не одночасно, тому збір може тривати кілька місяців. У північній півкулі збирають з жовтня по березень, у південній - з квітня по серпень.</p>
      
      <h2>Методи збору</h2>
      <p><strong>Селективний збір (picking)</strong> - зрілі вишні збирають вручну. Це найкращий, але найдорожчий метод.</p>
      <p><strong>Стрипінг (stripping)</strong> - всі вишні збирають одночасно, незалежно від ступеня стиглості. Швидше, але якість нижча.</p>
      
      <h2>Мокра обробка (Washed)</h2>
      <p>Вишні depulp-ують (знімають м'якоть), ферментують у воді 12-72 години, промивають і сушать. Дає чистий, яскравий смак з вираженою кислотністю.</p>
      
      <h2>Суха обробка (Natural)</h2>
      <p>Цілі вишні сушать на сонці 2-4 тижні, постійно перемішуючи. М'якоть висихає навколо зерна. Створює солодкі, фруктові смаки.</p>
      
      <h2>Напівмокра обробка (Honey/Pulped Natural)</h2>
      <p>М'якоть частково знімають, залишаючи слизову оболонку. Зерна сушать з цією оболонкою. Поєднує характеристики мокрої та сухої обробки.</p>
      
      <h2>Експериментальні методи</h2>
      <p>Анаеробна ферментація, карбонічна мацерація, різні види дріжджів - сучасні фермери експериментують з новими методами для створення унікальних смакових профілів.</p>
    </div>`,
    publishedAt: '2024-01-16',
    author: 'Serhii',
    category: 'Виробництво',
    tags: ['збір', 'обробка', 'фермерство', 'технології'],
    readingTime: 8,
    featured: false,
    coverImage: '/images/coffee-processing.jpg'
  },
  {
    slug: 'bean-journey-local-roasters',
    title: 'Шлях зерна до локальних обсмажчиків',
    excerpt: 'Як кавові зерна подорожують від ферм до локальних обсмажчиків, проходячи через складну мережу експортерів, імпортерів та трейдерів.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Між кавовою фермою та вашою локальною обсмажувальнею лежить складний шлях, що включає безліч етапів та учасників глобального кавового ланцюга.</p>
      
      <h2>Від ферми до експортера</h2>
      <p>Фермери продають свій урожай через кооперативи, локальних покупців (називаються "coyotes" в Центральній Америці) або безпосередньо експортерам. Ціна залежить від якості, сертифікацій та ринкових умов.</p>
      
      <h2>Роль кооперативів</h2>
      <p>Кооперативи об'єднують дрібних фермерів, допомагаючи їм отримувати кращі ціни, доступ до обладнання для обробки та міжнародних ринків. Це особливо важливо для справедливої торгівлі.</p>
      
      <h2>Експорт та логістика</h2>
      <p>Зерна пакують у джутові мішки по 60-70 кг, завантажують у контейнери та відправляють морем. Подорож може тривати від 2 до 8 тижнів залежно від пункту призначення.</p>
      
      <h2>Імпортери та трейдери</h2>
      <p>У країні призначення імпортери розподіляють каву між різними покупцями. Деякі спеціалізуються на specialty кави, інші працюють з комерційними сортами.</p>
      
      <h2>Specialty кава та прямі зв'язки</h2>
      <p>Багато specialty обсмажчиків намагаються встановлювати прямі зв'язки з фермерами, відвідуючи їх, вивчаючи процеси вирощування та платячи преміум ціни за якість.</p>
      
      <h2>Локальні обсмажчики</h2>
      <p>Невеликі локальні обсмажчики часто фокусуються на якості, свіжості та унікальних смакових профілях. Вони можуть працювати з specialty імпортерами або напряму з фермерами.</p>
      
      <h2>Сертифікації</h2>
      <p>Fair Trade, Organic, Rainforest Alliance, Bird Friendly - ці сертифікації допомагають споживачам робити усвідомлений вибір та підтримувати сталий розвиток кавової індустрії.</p>
    </div>`,
    publishedAt: '2024-01-14',
    author: 'Serhii',
    category: 'Торгівля',
    tags: ['торгівля', 'логістика', 'specialty', 'справедливість'],
    readingTime: 7,
    featured: false,
    coverImage: '/images/coffee-trade.jpg'
  },
  {
    slug: 'coffee-roasting-types-profiles',
    title: 'Типи обсмажки кави',
    excerpt: 'Вивчаємо різні ступені обсмажки кави від світлої до темної, та як кожен тип розкриває унікальні характеристики зерна.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Обсмажка - це мистецтво та наука, що перетворює зелені кавові зерна на ароматні коричневі зерна, готові для заварювання.</p>
      
      <h2>Хімія обсмажки</h2>
      <p>Під час обсмажки відбуваються реакція Майяра, карамелізація цукрів та піроліз. Ці процеси створюють понад 1000 ароматичних сполук, що формують смак кави.</p>
      
      <h2>Світла обсмажка (Light Roast)</h2>
      <p>Зерна світло-коричневого кольору, без олії на поверхні. Зберігає оригінальні характеристики зерна, має яскраву кислотність та квіткові/фруктові ноти. Підходить для альтернативних методів заварювання.</p>
      
      <h2>Середня обсмажка (Medium Roast)</h2>
      <p>Збалансована обсмажка з помірною кислотністю та солодкістю. Зерна мають рівномірний коричневий колір. Універсальна для більшості методів приготування.</p>
      
      <h2>Середньо-темна обсмажка (Medium-Dark)</h2>
      <p>Темно-коричневі зерна з легким блиском олії. Менша кислотність, більше тіла та карамельних нот. Популярна для еспресо сумішей.</p>
      
      <h2>Темна обсмажка (Dark Roast)</h2>
      <p>Дуже темні, майже чорні зерна з олійною поверхнею. Домінують ноти обсмажки над оригінальними характеристиками зерна. Низька кислотність, горчуватий смак.</p>
      
      <h2>Профіль обсмажки</h2>
      <p>Досвідчені обсмажчики розробляють унікальні профілі - комбінації температури, часу та швидкості нагрівання для розкриття найкращих якостей конкретного зерна.</p>
      
      <h2>Домашня обсмажка</h2>
      <p>Можна смажити вдома у звичайній сковороді, духовці або спеціальних домашніх ростерах. Це дозволяє експериментувати та отримувати найсвіжішу каву.</p>
    </div>`,
    publishedAt: '2024-01-12',
    author: 'Serhii',
    category: 'Обсмажка',
    tags: ['обсмажка', 'профіль', 'смак', 'техніка'],
    readingTime: 6,
    featured: false,
    coverImage: '/images/coffee-roasting.jpg'
  },
  {
    slug: 'espresso-based-drinks-recipes',
    title: 'Рецепти популярних кавових напоїв на основі еспресо',
    excerpt: 'Детальні рецепти класичних та сучасних кавових напоїв: від капучино до флет вайт, з пропорціями та техніками приготування.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Еспресо є основою для безлічі популярних кавових напоїв. Кожен має свої пропорції, техніку приготування та унікальні характеристики.</p>
      
      <h2>Капучино (Cappuccino)</h2>
      <p><strong>Пропорції:</strong> 1/3 еспресо, 1/3 пропарене молоко, 1/3 молочна піна</p>
      <p><strong>Приготування:</strong> Подвійний еспресо (60мл) у чашку 150-180мл, додати пропарене молоко з щільною піною. Підавати відразу.</p>
      
      <h2>Лате (Latte)</h2>
      <p><strong>Пропорції:</strong> 1/6 еспресо, 4/6 пропарене молоко, 1/6 молочна піна</p>
      <p><strong>Приготування:</strong> Подвійний еспресо у чашку 240мл, повільно влити пропарене молоко, залишити тонкий шар піни зверху.</p>
      
      <h2>Флет вайт (Flat White)</h2>
      <p><strong>Пропорції:</strong> Подвійний еспресо + мікропіна (тонко текстуроване молоко)</p>
      <p><strong>Приготування:</strong> Еспресо у чашку 150-160мл, влити молоко з дуже тонкою мікропіною. Сильніший за лате, ніжніший за капучино.</p>
      
      <h2>Макіато (Macchiato)</h2>
      <p><strong>Пропорції:</strong> Подвійний еспресо + ложка молочної піни</p>
      <p><strong>Приготування:</strong> Еспресо у маленьку чашку, "помітити" (macchiare) ложкою піни зверху.</p>
      
      <h2>Американо</h2>
      <p><strong>Пропорції:</strong> Подвійний еспресо + 120-150мл гарячої води</p>
      <p><strong>Приготування:</strong> Спочатку еспресо, потім додати гарячу воду. Або навпаки (Long Black) для збереження крема.</p>
      
      <h2>Мокка (Mocha)</h2>
      <p><strong>Пропорції:</strong> Еспресо + шоколадний сироп + пропарене молоко + збиті вершки</p>
      <p><strong>Приготування:</strong> Змішати еспресо з шоколадним сиропом, додати пропарене молоко, прикрасити вершками.</p>
      
      <h2>Поради баристи</h2>
      <p>Температура молока 60-65°C, еспресо екстрагувати 25-30 секунд, використовувати свіжообсмажені зерна (2-30 днів після обсмажки).</p>
    </div>`,
    publishedAt: '2024-01-10',
    author: 'Serhii',
    category: 'Рецепти',
    tags: ['еспресо', 'рецепти', 'молоко', 'техніка'],
    readingTime: 8,
    featured: true,
    coverImage: '/images/espresso-drinks.jpg'
  },
  {
    slug: 'alternative-coffee-brewing-methods',
    title: 'Альтернативні методи приготування кави',
    excerpt: 'Дослідження різних способів заварювання кави: від класичної турки до сучасних методів, кожен з яких розкриває унікальні грані смаку.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Альтернативні методи заварювання дозволяють розкрити різні аспекти кавового зерна, створюючи унікальні смакові переживання.</p>
      
      <h2>V60 (Hario V60)</h2>
      <p>Конусоподібна воронка з великим отвором та спіральними ребрами. Швидкий потік води розкриває яскравість та чистоту смаку. Час заварювання: 2-4 хвилини.</p>
      
      <h2>Chemex</h2>
      <p>Елегантна скляна воронка з товстими фільтрами. Створює чисту, м'яку каву без гіркоти. Ідеально для світлої обсмажки. Час заварювання: 4-6 хвилин.</p>
      
      <h2>AeroPress</h2>
      <p>Універсальний метод з тиском повітря. Можна готувити як еспресо-подібний концентрат, так і фільтрову каву. Швидко та зручно для подорожей.</p>
      
      <h2>French Press (Френч-прес)</h2>
      <p>Занурення та заварювання протягом 4 хвилин. Створює каву з повним тілом та насиченим смаком. Метални фільтр пропускає кавові олії.</p>
      
      <h2>Турка (Джезва)</h2>
      <p>Традиційний східний метод. Кава мелкого помелу заварюється в турці на повільному вогні. Створює густу, ароматну каву з пінкою.</p>
      
      <h2>Cold Brew (Холодне заварювання)</h2>
      <p>Заварювання холодною водою протягом 12-24 годин. Створює м'який, солодкий концентрат без кислотності. Ідеально для спекотних днів.</p>
      
      <h2>Syphon (Сифон)</h2>
      <p>Вакуумний метод з ефектним процесом заварювання. Контрольована температура та час створюють чисту, ароматну каву з тілом.</p>
      
      <h2>Kalita Wave</h2>
      <p>Плоскодонна воронка з хвилястими фільтрами. Рівномірна екстракція створює збалансовану каву з чистим смаком.</p>
      
      <h2>Поради для альтернативних методів</h2>
      <p>Використовуйте якісну воду (мінералізація 75-150 ppm), правильний помел для кожного методу, контролюйте температуру води (90-96°C для більшості методів).</p>
    </div>`,
    publishedAt: '2024-01-08',
    author: 'Serhii',
    category: 'Заварювання',
    tags: ['альтернативні методи', 'v60', 'chemex', 'френч-прес'],
    readingTime: 9,
    featured: false,
    coverImage: '/images/alternative-brewing.jpg'
  },
  {
    slug: 'coffee-influence-culture-art',
    title: 'Вплив кави на культуру та мистецтво',
    excerpt: 'Як кава формувала культуру, надихала письменників та художників, створювала нові соціальні простори та змінювала суспільство.',
    content: `<div class="prose prose-lg max-w-none">
      <p>Кава не просто напій - це культурний феномен, що протягом століть впливав на мистецтво, літературу, музику та соціальні рухи.</p>
      
      <h2>Кав'ярні як центри культури</h2>
      <p>У XVII-XVIII століттях кав'ярні стали "університетами за пенні" - місцями, де за ціну чашки кави можна було дізнатися останні новини, обговорити політику та науку. Lloyd's of London почався як кав'ярня.</p>
      
      <h2>Література та кава</h2>
      <p>Вольтер випивав 40 чашок на день і прожив 83 роки. Бальзак писав під впливом кави, Джоан Роулінг створювала Гаррі Поттера в едінбурзьких кав'ярнях. Кава стала музою для незліченних письменників.</p>
      
      <h2>Парижські кафе та мистецтво</h2>
      <p>Кафе де Флор, Лез Дё Маго - тут народжувались ідеї екзистенціалізму. Сартр, Де Бовуар, Камю проводили тут години, створюючи філософські твори за чашкою кави.</p>
      
      <h2>Кава у живописі</h2>
      <p>Від голландських натюрмортів XVII століття до сучасного поп-арту - кава з'являється в роботах Вермеєра, Мане, Ренуара. Кав'ярні стали популярним сюжетом імпресіоністів.</p>
      
      <h2>Музика та кава</h2>
      <p>Бах написав "Кавову кантату", джаз розквітав у кав'ярнях, а сучасні coffee shops стали платформою для незалежних музикантів. Кава створює атмосферу для музичної творчості.</p>
      
      <h2>Соціальні рухи</h2>
      <p>Бостонське чаювання почалося в кав'ярні, революції планувались за кавовими столами. У Східній Європі кав'ярні були центрами опозиційної думки.</p>
      
      <h2>Сучасна кав культура</h2>
      <p>Third wave coffee перетворила кавоваріння на мистецтво. Latte art, specialty кава, кубки для подорожей - кава продовжує впливати на естетику та спосіб життя.</p>
      
      <h2>Digital nomads та co-working</h2>
      <p>Кав'ярні стали новими офісами для фрілансерів та стартапів. WiFi + кава = нова модель роботи, що змінює міську культуру.</p>
    </div>`,
    publishedAt: '2024-01-06',
    author: 'Serhii',
    category: 'Культура',
    tags: ['культура', 'мистецтво', 'література', 'суспільство'],
    readingTime: 10,
    featured: true,
    coverImage: '/images/coffee-culture-art.jpg'
  }
];

export async function getAllPosts(): Promise<BlogMetadata[]> {
  return sampleArticles.map(({ content, ...metadata }) => metadata);
}

export async function getPostBySlug(slug: string): Promise<BlogPost | null> {
  const post = sampleArticles.find(article => article.slug === slug);
  return post || null;
}

export async function getFeaturedPosts(): Promise<BlogMetadata[]> {
  return sampleArticles
    .filter(article => article.featured)
    .map(({ content, ...metadata }) => metadata);
} 